@model GameManagerViewerViewModel

<form id="OpenGameForm" asp-controller="GameTracker" asp-action="OpenGame"></form>

<div class="row justify-content-center">
    <div class="col-md-6 text-center">
        <h1>Game Tracker</h1>
        <hr />
    </div>
</div>

<div class="accordion" id="gamesAccordian">
    @for (var i = 0; i < Model.Games.Count; i++)
    {
        var game = Model.Games[i];
        <div class="accordion-item">
            <h2 class="accordion-header" id="cardHeading_@i">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#game_@i" aria-expanded="false" aria-controls="game_@i">
                    Game #@game.Id - @game.GameDate.ToString("MM/dd/yyyy")
                </button>
            </h2>
            <div id="game_@i" class="accordion-collapse collapse" aria-labelledby="cardHeading_@i" data-bs-parent="#gamesAccordian">
                <div class="accordion-body">
                    <div class="d-grid gap-2">
                        <button form="OpenGameForm" name="gameId" value="@game.Id" class="btn btn-outline-primary loadButton" type="submit">Open</button>
                    </div>
                    <hr />
                    <div class="row justify-content-center">
                        <div class="col-md-12 text-center">
                            @foreach (var gameData in game.GamePlayData.OrderByDescending(p => p.Points))
                            {
                                <h3>@gameData.PlayerData.FirstName @gameData.PlayerData.LastName</h3>
                                <h4>Points: @gameData.Points</h4>
                                <h5>@gameData.PlayerFaction.Name</h5>
                                <hr />
                            }
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>